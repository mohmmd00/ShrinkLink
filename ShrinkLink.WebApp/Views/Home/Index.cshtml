@model ShrinkLink.WebApp.Models.Dtos.ShortenerViewModel

<div class="container text-left text-white">
    <h1 class="mt-5">Welcome to ShrinkLink!</h1>
    <p class="lead mb-4">Our website is cool in every way – fast, simple, and free!</p>
</div>

<div class="d-flex justify-content-center align-items-center py-5">
    <div class="main-card p-5 w-100" style="max-width: 600px;">
        <h3 class="text-center mb-4">Shorten Your URL</h3>

        <!-- Standard form submission -->
        <form method="post" asp-controller="Home" asp-action="PostLongUrl">
            <div class="mb-3">
                <label asp-for="Request.LongLink" class="form-label">Enter Long URL</label>
                <input type="url" class="form-control" asp-for="Request.LongLink" placeholder="https://example.com" required>

                <span asp-validation-for="Request.LongLink" class="text-danger"></span>
            </div>
            <button type="submit" class="btn btn-primary w-100 mb-3">Shorten</button>
@*             @while (true)
            {
                Console.WriteLine(@Model.Request.LongLink);
            } *@
        </form>

        <!-- Show result if available -->
        @if (Model?.Response != null && !string.IsNullOrEmpty(Model.Response.ShortUrl))
        {
            <div class="mt-3">
                <h5>Result:</h5>
                <div class="input-group">
                    <input type="text" class="form-control" value="@Model.Response.ShortUrl" readonly>
                    <button class="btn btn-outline-secondary" type="button" onclick="copyToClipboard()">Copy</button>
                </div>
            </div>
        }
    </div>
</div>

@section Scripts {
    <script>
        function copyToClipboard() {
            const input = document.querySelector('.input-group input');
            input.select();
            document.execCommand('copy');
        }
    </script>
}